<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NECO SSCE 2025 Performance Analysis - Taqwa High School</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Chart.js for data visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Load Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        .donut-chart-container {
            position: relative;
            width: 100%;
            max-width: 350px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
        }
        .grade-legend span {
            display: inline-flex;
            align-items: center;
            margin-right: 1rem;
            font-size: 0.875rem;
            color: #4b5563;
        }
        .grade-color {
            width: 12px;
            height: 12px;
            border-radius: 3px;
            margin-right: 0.5rem;
        }
        /* Custom colors for grades A1-C6 (Pass) and D7-F9 (Fail) */
        .color-A1 { background-color: #10b981; }
        .color-B2 { background-color: #34d399; }
        .color-B3 { background-color: #6ee7b7; }
        .color-C4 { background-color: #3b82f6; }
        .color-C5 { background-color: #60a5fa; }
        .color-C6 { background-color: #93c5fd; }
        .color-Fail { background-color: #f87171; }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header Section -->
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 leading-tight">
                NECO SSCE 2025 Performance Analysis
            </h1>
            <p class="mt-2 text-xl text-indigo-600 font-medium">Taqwa High School - Comparative Subject Breakdown</p>
            <div class="mt-4 p-3 bg-red-100 rounded-lg shadow-inner text-sm text-red-800">
                <span class="font-bold">Important:</span> Data excludes subjects marked 'PENDING'. The average GP for the group is **5.12** (C5 equivalent).
            </div>
        </header>

        <!-- Grade Legend -->
        <div class="flex flex-wrap justify-center space-x-2 sm:space-x-4 mb-8 p-4 bg-white rounded-xl shadow-lg">
            <h3 class="w-full text-center text-lg font-semibold text-gray-700 mb-3">Grade Point Legend (A1=1 to F9=9)</h3>
            <div class="grade-legend">
                <span><i class="grade-color color-A1"></i> A1 (1)</span>
                <span><i class="grade-color color-B2"></i> B2 (2)</span>
                <span><i class="grade-color color-B3"></i> B3 (3)</span>
                <span><i class="grade-color color-C4"></i> C4 (4)</span>
                <span><i class="grade-color color-C5"></i> C5 (5)</span>
                <span><i class="grade-color color-C6"></i> C6 (6)</span>
                <span><i class="grade-color color-Fail"></i> D7-F9 (7-9)</span>
            </div>
        </div>

        <!-- Main Comparative Bar Chart -->
        <section class="bg-white p-6 sm:p-8 rounded-2xl shadow-2xl mb-12">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Core Subject Grade Distribution (All 10 Students)</h2>
            <p class="text-gray-600 mb-6">Comparison of performance across the most commonly taken subjects: English Language, General Mathematics, and Civic Education.</p>
            <div class="chart-container">
                <canvas id="gradeDistributionChart"></canvas>
            </div>
        </section>

        <!-- Spotlight Donut Charts Section (Pass vs Fail) -->
        <section class="bg-white p-6 sm:p-8 rounded-2xl shadow-2xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Science Subject Spotlight (A1-C6 Credit/Pass vs D7-F9 Fail)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">

                <!-- Biology Donut -->
                <div class="text-center">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Biology (5 Students)</h3>
                    <div class="donut-chart-container">
                        <canvas id="biologyDonut"></canvas>
                    </div>
                </div>

                <!-- Chemistry Donut -->
                <div class="text-center">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Chemistry (4 Students)</h3>
                    <div class="donut-chart-container">
                        <canvas id="chemistryDonut"></canvas>
                    </div>
                </div>

                <!-- Physics Donut -->
                <div class="text-center">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Physics (4 Students)</h3>
                    <div class="donut-chart-container">
                        <canvas id="physicsDonut"></canvas>
                    </div>
                </div>

                <!-- Literature in English Donut -->
                <div class="text-center">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">Lit in English (3 Students)</h3>
                    <div class="donut-chart-container">
                        <canvas id="literatureDonut"></canvas>
                    </div>
                </div>
            </div>
        </section>

    </div>

    <script>
        // Data Structure for NECO Results
        const gradeMap = {
            'A1': 1, 'B2': 2, 'B3': 3, 'C4': 4, 'C5': 5, 'C6': 6,
            'D7': 7, 'E8': 8, 'F9': 9, 'PENDING': 0, '*': 0
        };

        // Consolidated NECO Subject Data (Counts for 10 students where applicable)
        const resultsData = [
            // Student count = 10
            { subject: 'ENGLISH LANGUAGE', students: 10, A1: 0, B2: 0, B3: 0, C4: 5, C5: 4, C6: 1, D7: 0, E8: 0, F9: 0 },
            { subject: 'GENERAL MATHEMATICS', students: 10, A1: 0, B2: 2, B3: 2, C4: 2, C5: 1, C6: 1, D7: 2, E8: 0, F9: 0 },
            { subject: 'CIVIC EDUCATION', students: 10, A1: 0, B2: 1, B3: 4, C4: 1, C5: 3, C6: 1, D7: 0, E8: 0, F9: 0 },
            
            // Student counts vary for other subjects
            { subject: 'BIOLOGY', students: 5, A1: 0, B2: 0, B3: 1, C4: 0, C5: 1, C6: 3, D7: 0, E8: 0, F9: 0 },
            { subject: 'CHEMISTRY', students: 4, A1: 0, B2: 0, B3: 0, C4: 0, C5: 1, C6: 0, D7: 2, E8: 0, F9: 1 },
            { subject: 'PHYSICS', students: 4, A1: 0, B2: 0, B3: 0, C4: 0, C5: 2, C6: 0, D7: 1, E8: 0, F9: 1 },
            { subject: 'LITERATURE IN ENGLISH', students: 3, A1: 0, B2: 2, B3: 1, C4: 0, C5: 0, C6: 0, D7: 0, E8: 0, F9: 0 },
        ];


        // Function to create the main bar chart (Grade Distribution)
        function createGradeDistributionChart() {
            const subjects = ['ENGLISH LANGUAGE', 'GENERAL MATHEMATICS', 'CIVIC EDUCATION'];
            const dataForChart = resultsData.filter(d => subjects.includes(d.subject));

            const labels = subjects;
            const gradeKeys = ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9'];
            
            const gradeColors = {
                'A1': '#10b981', 'B2': '#34d399', 'B3': '#6ee7b7', 
                'C4': '#3b82f6', 'C5': '#60a5fa', 'C6': '#93c5fd', 
                'D7': '#f87171', 'E8': '#ef4444', 'F9': '#b91c1c'
            };

            const datasets = gradeKeys.map(key => {
                return {
                    label: key,
                    data: dataForChart.map(subjectData => subjectData[key]),
                    backgroundColor: gradeColors[key],
                    stack: 'Stack 1',
                };
            });
            
            new Chart(document.getElementById('gradeDistributionChart'), {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: datasets,
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        title: {
                            display: false,
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            grid: { display: false }
                        },
                        y: {
                            stacked: true,
                            title: {
                                display: true,
                                text: 'Number of Students',
                            },
                            ticks: {
                                precision: 0,
                                stepSize: 1
                            },
                            max: 10 // Since all students took these subjects
                        }
                    }
                }
            });
        }

        // Function to create donut charts (Pass vs Fail)
        function createDonutChart(canvasId, data) {
            const total = data.values.reduce((sum, current) => sum + current, 0);
            const passPercentage = total > 0 ? ((data.values[0] / total) * 100).toFixed(1) : 0;
            
            // Inject the percentage into the canvas container for display
            const container = document.getElementById(canvasId).closest('.text-center');
            const percentageDisplay = document.createElement('div');
            percentageDisplay.className = 'mt-[-150px] font-bold text-3xl text-indigo-700';
            percentageDisplay.textContent = `${passPercentage}%`;
            container.appendChild(percentageDisplay);
            
            new Chart(document.getElementById(canvasId), {
                type: 'doughnut',
                data: {
                    labels: data.labels,
                    datasets: [{
                        data: data.values,
                        backgroundColor: [
                            '#10b981', // Pass (Green)
                            '#f87171'  // Fail (Red)
                        ],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '75%', // Makes it a donut
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + ' Students';
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        // Initialize all charts when the window loads
        window.onload = function () {
            createGradeDistributionChart();

            // 1. Biology Donut
            const bioData = resultsData.find(s => s.subject === 'BIOLOGY');
            const bioPass = bioData.A1 + bioData.B2 + bioData.B3 + bioData.C4 + bioData.C5 + bioData.C6; // 5 Pass
            const bioFail = bioData.students - bioPass; // 0 Fail
            createDonutChart('biologyDonut', { labels: ['Credit (A1-C6)', 'Fail (D7-F9)'], values: [bioPass, bioFail] });

            // 2. Chemistry Donut
            const chemData = resultsData.find(s => s.subject === 'CHEMISTRY');
            const chemPass = chemData.A1 + chemData.B2 + chemData.B3 + chemData.C4 + chemData.C5 + chemData.C6; // 1 Pass
            const chemFail = chemData.students - chemPass; // 3 Fail
            createDonutChart('chemistryDonut', { labels: ['Credit (A1-C6)', 'Fail (D7-F9)'], values: [chemPass, chemFail] });
            
            // 3. Physics Donut
            const physicsData = resultsData.find(s => s.subject === 'PHYSICS');
            const physicsPass = physicsData.A1 + physicsData.B2 + physicsData.B3 + physicsData.C4 + physicsData.C5 + physicsData.C6; // 2 Pass
            const physicsFail = physicsData.students - physicsPass; // 2 Fail
            createDonutChart('physicsDonut', { labels: ['Credit (A1-C6)', 'Fail (D7-F9)'], values: [physicsPass, physicsFail] });
            
            // 4. Literature in English Donut
            const litData = resultsData.find(s => s.subject === 'LITERATURE IN ENGLISH');
            const litPass = litData.A1 + litData.B2 + litData.B3 + litData.C4 + litData.C5 + litData.C6; // 3 Pass
            const litFail = litData.students - litPass; // 0 Fail
            createDonutChart('literatureDonut', { labels: ['Credit (A1-C6)', 'Fail (D7-F9)'], values: [litPass, litFail] });
        };
    </script>
</body>
</html>